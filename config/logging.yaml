# ============================================================================
# TELECOM X - LOGGING CONFIGURATION
# ============================================================================
# Configuración completa de logging para el proyecto Telecom X
# Desarrollado por: Elizabeth Díaz Familia
# Versión: 1.0.0
# ============================================================================

version: 1
disable_existing_loggers: False

# ============================================================================
# FORMATTERS - Formatos de los logs
# ============================================================================
formatters:
  default:
    format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
    datefmt: '%Y-%m-%d %H:%M:%S'
  
  detailed:
    format: '%(asctime)s - %(name)s - %(levelname)s - [%(filename)s:%(lineno)d] - %(funcName)s() - %(message)s'
    datefmt: '%Y-%m-%d %H:%M:%S'
  
  simple:
    format: '%(levelname)s - %(message)s'
  
  json:
    format: '{"time": "%(asctime)s", "name": "%(name)s", "level": "%(levelname)s", "message": "%(message)s", "file": "%(filename)s", "line": %(lineno)d}'
    datefmt: '%Y-%m-%d %H:%M:%S'

# ============================================================================
# HANDLERS - Manejadores de logs
# ============================================================================
handlers:
  # Console handler - Salida a consola
  console:
    class: logging.StreamHandler
    level: INFO
    formatter: default
    stream: ext://sys.stdout
  
  # File handler - Archivo general
  file:
    class: logging.handlers.RotatingFileHandler
    level: DEBUG
    formatter: detailed
    filename: logs/telecom_x.log
    maxBytes: 10485760  # 10MB
    backupCount: 5
    encoding: utf8
  
  # Error file handler - Solo errores
  error_file:
    class: logging.handlers.RotatingFileHandler
    level: ERROR
    formatter: detailed
    filename: logs/errors.log
    maxBytes: 10485760  # 10MB
    backupCount: 10
    encoding: utf8
  
  # ETL handler - Pipeline ETL específico
  etl_file:
    class: logging.handlers.RotatingFileHandler
    level: DEBUG
    formatter: detailed
    filename: logs/etl_pipeline.log
    maxBytes: 10485760  # 10MB
    backupCount: 5
    encoding: utf8
  
  # Analysis handler - Análisis y ML
  analysis_file:
    class: logging.handlers.RotatingFileHandler
    level: DEBUG
    formatter: detailed
    filename: logs/analysis.log
    maxBytes: 10485760  # 10MB
    backupCount: 5
    encoding: utf8
  
  # API handler - Logs de API
  api_file:
    class: logging.handlers.RotatingFileHandler
    level: INFO
    formatter: json
    filename: logs/api.log
    maxBytes: 10485760  # 10MB
    backupCount: 5
    encoding: utf8
  
  # Performance handler - Métricas de rendimiento
  performance_file:
    class: logging.handlers.RotatingFileHandler
    level: INFO
    formatter: json
    filename: logs/performance.log
    maxBytes: 10485760  # 10MB
    backupCount: 3
    encoding: utf8

# ============================================================================
# LOGGERS - Configuración de loggers por módulo
# ============================================================================
loggers:
  # Logger raíz
  '':
    level: DEBUG
    handlers: [console, file, error_file]
    propagate: False
  
  # ETL Pipeline
  src.etl:
    level: DEBUG
    handlers: [etl_file, console]
    propagate: False
  
  src.etl.extract:
    level: DEBUG
    handlers: [etl_file]
    propagate: False
  
  src.etl.transform:
    level: DEBUG
    handlers: [etl_file]
    propagate: False
  
  src.etl.load:
    level: DEBUG
    handlers: [etl_file]
    propagate: False
  
  src.etl.pipeline:
    level: INFO
    handlers: [etl_file, console]
    propagate: False
  
  # Analysis modules
  src.analysis:
    level: DEBUG
    handlers: [analysis_file, console]
    propagate: False
  
  src.analysis.churn_analysis:
    level: DEBUG
    handlers: [analysis_file]
    propagate: False
  
  src.analysis.statistical_analysis:
    level: DEBUG
    handlers: [analysis_file]
    propagate: False
  
  src.ml:
    level: DEBUG
    handlers: [analysis_file]
    propagate: False
  
  # Visualization
  src.visualization:
    level: INFO
    handlers: [file, console]
    propagate: False
  
  # Reports
  src.reports:
    level: INFO
    handlers: [file, console]
    propagate: False
  
  # API
  src.api:
    level: INFO
    handlers: [api_file, console]
    propagate: False
  
  # Utils
  src.utils:
    level: INFO
    handlers: [file]
    propagate: False
  
  # Performance monitoring
  performance:
    level: INFO
    handlers: [performance_file]
    propagate: False
  
  # Third-party libraries
  matplotlib:
    level: WARNING
    handlers: [file]
    propagate: False
  
  PIL:
    level: WARNING
    handlers: [file]
    propagate: False
  
  urllib3:
    level: WARNING
    handlers: [file]
    propagate: False

# ============================================================================
# ROOT LOGGER - Configuración del logger principal
# ============================================================================
root:
  level: INFO
  handlers: [console, file, error_file]

# ============================================================================
# NOTAS DE USO:
# ============================================================================
# 1. Crear directorio logs/ antes de ejecutar: mkdir -p logs/
# 2. Importar en Python:
#    import logging.config
#    import yaml
#    with open('config/logging.yaml', 'r') as f:
#        config = yaml.safe_load(f.read())
#        logging.config.dictConfig(config)
#
# 3. Usar en código:
#    logger = logging.getLogger(__name__)
#    logger.info("Mensaje informativo")
#    logger.error("Mensaje de error")
#
# 4. Los logs se rotan automáticamente al alcanzar 10MB
# 5. Se mantienen 5 backups de cada archivo de log
# ============================================================================
